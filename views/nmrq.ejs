<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <link rel="stylesheet" href="/public/css/style.css" rel="stylesheet">
    
        <!-- JavaScript Libraries -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
        <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.2.0/p5.min.js"></script> -->
        <!-- Favicon -->
        <link rel="icon" href="/public/assets/favicon.webp" type="image/x-icon">
        <!-- Page Title -->
        <title>Security Control Simulation System</title>
    </head>

<body>
    <!-- Navigation Bar -->
    <nav class="custom-navbar">
        <div class="navbar-logo">
            <a>SCSS</a>
        </div>

    </nav>
    <section class="info">
        <section class="container">
            <h1>Resilience Questionnaire</h1>
            <h2>How resilient are you?</h2>
            <p>This is an abbreviated version of the Nicholson McBride Resilience questionnaire (NMRQ).</p>
            <p>For each question, score yourself between 1 - 5</p>
            <p><bold>(Note: 1 = strongly disagree and 5 = strongly agree)</bold></p>
        </section>
        
        <form action="/scales/addScale" method="post">
            <div class="form-group">
                <label for="nmrq-1">
                <p class="form-text">1. In a difficult spot, I turn at once to what can be done to put things right.</p></label>
                <div class="likert-scale">
                    <% for (let i = 1; i <= 5; i++) {%>
                        <input type="radio" id="nmrq-1-<%= i%>" name="nmrq-1" value="<%= i %>">
                        <label for="nmrq-1-<%= i%>"><%= i%></label>
                    <% } %>
                </div>
            </div>
            <div class="form-group">
                <label for="nmrq-2">
                <p class="form-text">2. I influence where I can, rather than worrying about what I can't influence.</p></label>
                <div class="likert-scale">
                    <% for (let i = 1; i <= 5; i++) {%>
                        <input type="radio" id="nmrq-2-<%= i%>" name="nmrq-2" value="<%= i %>">
                        <label for="nmrq-2-<%= i%>"><%= i%></label>
                    <% } %>
                </div>
            </div>
            <div class="form-group">
                <label for="nmrq-3">
                <p class="form-text">3. I don't take criticism personally.</p></label>
                <div class="likert-scale">
                    <% for (let i = 1; i <= 5; i++) {%>
                        <input type="radio" id="nmrq-3-<%= i%>" name="nmrq-3" value="<%= i %>">
                        <label for="nmrq-3-<%= i%>"><%= i%></label>
                    <% } %>
                </div>
            </div>
            <div class="form-group">
                <label for="nmrq-4">
                <p class="form-text">4. I generally manage to keep things in perspective.</p></label>
                <div class="likert-scale">
                    <% for (let i = 1; i <= 5; i++) {%>
                        <input type="radio" id="nmrq-4-<%= i%>" name="nmrq-4" value="<%= i %>">
                        <label for="nmrq-4-<%= i%>"><%= i%></label>
                    <% } %>
                </div>
            </div>
            <div class="form-group">
                <label for="nmrq-5">
                <p class="form-text">5. I am calm in a crisis.</p></label>
                <div class="likert-scale">
                    <% for (let i = 1; i <= 5; i++) {%>
                        <input type="radio" id="nmrq-5-<%= i%>" name="nmrq-5" value="<%= i %>">
                        <label for="nmrq-5-<%= i%>"><%= i%></label>
                    <% } %>
                </div>
            </div>
            <div class="form-group">
                <label for="nmrq-6">
                <p class="form-text">6. I am good at finding solutions to problems.</p></label>
                <div class="likert-scale">
                    <% for (let i = 1; i <= 5; i++) {%>
                        <input type="radio" id="nmrq-6-<%= i%>" name="nmrq-6" value="<%= i %>">
                        <label for="nmrq-6-<%= i%>"><%= i%></label>
                    <% } %>
                </div>
            </div>
            <div class="form-group">
                <label for="nmrq-7">
                <p class="form-text">7. I wouldn't describe myself as an anxious person.</p></label>
                <div class="likert-scale">
                    <% for (let i = 1; i <= 5; i++) {%>
                        <input type="radio" id="nmrq-7-<%= i%>" name="nmrq-7" value="<%= i %>">
                        <label for="nmrq-7-<%= i%>"><%= i%></label>
                    <% } %>
                </div>
            </div>
            <div class="form-group">
                <label for="nmrq-8">
                <p class="form-text">8. I don't tend to avoid conflict</p></label>
                <div class="likert-scale">
                    <% for (let i = 1; i <= 5; i++) {%>
                        <input type="radio" id="nmrq-8-<%= i%>" name="nmrq-8" value="<%= i %>">
                        <label for="nmrq-8-<%= i%>"><%= i%></label>
                    <% } %>
                </div>
            </div>
            <div class="form-group">
                <label for="nmrq-9">
                <p class="form-text">9. I try to control events rather than being a victim of circumstances.</p></label>
                <div class="likert-scale">
                    <% for (let i = 1; i <= 5; i++) {%>
                        <input type="radio" id="nmrq-9-<%= i%>" name="nmrq-9" value="<%= i %>">
                        <label for="nmrq-9-<%= i%>"><%= i%></label>
                    <% } %>
                </div>
            </div>
            <div class="form-group">
                <label for="nmrq-10">
                <p class="form-text">10. I trust my intuition.</p></label>
                <div class="likert-scale">
                    <% for (let i = 1; i <= 5; i++) {%>
                        <input type="radio" id="nmrq-10-<%= i%>" name="nmrq-10" value="<%= i %>">
                        <label for="nmrq-10-<%= i%>"><%= i%></label>
                    <% } %>
                </div>
            </div>
            <div class="form-group">
                <label for="nmrq-11">
                <p class="form-text">11. I manage my stress levels well.</p></label>
                <div class="likert-scale">
                    <% for (let i = 1; i <= 5; i++) {%>
                        <input type="radio" id="nmrq-11-<%= i%>" name="nmrq-11" value="<%= i %>">
                        <label for="nmrq-11-<%= i%>"><%= i%></label>
                    <% } %>
                </div>
            </div>
            <div class="form-group">
                <label for="nmrq-12">
                <p class="form-text">12. I feel confident and secure in my position</p></label>
                <div class="likert-scale">
                    <% for (let i = 1; i <= 5; i++) {%>
                        <input type="radio" id="nmrq-12-<%= i%>" name="nmrq-12" value="<%= i %>">
                        <label for="nmrq-12-<%= i%>"><%= i%></label>
                    <% } %>
                </div>
            </div>
            <div class="d-flex justify-content-center">
                <button type="submit" id="submit">Submit</button>
            </div>
        </form>
    </section>
    <script>
        document.getElementById("submit").addEventListener("click", () => {
            var allItems = document.querySelectorAll('input');
            let items = [];
            for (let i = 0; i < allItems.length; i += 7){
                items.push(allItems[i].name)
            }
            for (let i = 0; i < items.length; i++){
                let itemArray = document.getElementsByName(items[i]);
                let checkedFlag = false;
                for (let j = 0; j < itemArray.length; j++) {
                    if (document.getElementById(itemArray[j].id).checked) {
                        checkedFlag = true;
                        console.log("checked flag has changed")
                    }
                }
                if (checkedFlag === false) {
                    window.alert(`Please respond to question number ${items[i].slice(-2)}`);
                    event.preventDefault();
                }
            }   
        })
    </script>

</body>
</html>